<div class="info-content">
    <div class="row no-space white actions-container">
        <div class="row no-space title-container">
            <div class="col s10 valign-wrapper title">
                <span>{{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TITLE' | translate }}</span>
            </div>
        </div>
        <div class="container-filter filter-container">
            <div class="column-filter">
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.SEARCH' | translate }}</mat-label>
                    <input matInput id="level" type="text" (keyup)="applyFilter($event.target.value)">
                    <mat-icon matSuffix class="material-icons">search</mat-icon>
                </mat-form-field>
            </div>

            <div class="column-filter">
                <mat-form-field appearance="outline">
                    <mat-label>{{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.FILTER' | translate }}</mat-label>
                    <mat-select [(value)]="selected" (selectionChange)="somethingChanged(selected)">
                        <mat-option value="" disabled>{{ 'SELECT_OPTION' | translate }}</mat-option>
                        <mat-option *ngFor="let categories of categoriesDisplay" [value]="categories?.value">
                            {{ ('STOREKEEPER-CRM.RESTRICTIONS_CENTER.' +  categories?.text) | translate }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="column-filter-button">
                <button mat-flat-button class="delete-button" (click)="resctrictionsDelete()">
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.DELETE' | translate }}
                </button>
            </div>

            <div class="column-filter-button">
                <button mat-flat-button class="segment-button" (click)="uploadFile()">
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.SEGMENTS' | translate }}
                </button>
            </div>

            <div class="column-filter-button">
                <button mat-flat-button class="accept-button"
                    *hasPermission="['storekeeper', 'restrictions-center-create']" (click)="addItem(null)">
                    <mat-icon>add</mat-icon>{{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.CREATE_RESTRICTIONS' | translate }}
                </button>
            </div>
        </div>
    </div>

    <div class="row" [hidden]="(!restrictionsData)">
        <table mat-table [dataSource]="restrictionsData" class="container-table" matSort>

            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.ID' | translate | uppercase }}
                </th>
                <td mat-cell *matCellDef="let restrictions"
                    [attr.data-th]="'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.ID' | translate">
                    {{ restrictions?.id }}
                </td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.NAME' | translate | uppercase }}
                </th>
                <td mat-cell *matCellDef="let restrictions"
                    [attr.data-th]="'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.NAME' | translate">
                    {{ restrictions?.name }}

                </td>
            </ng-container>

            <ng-container matColumnDef="created">
                <th mat-header-cell *matHeaderCellDef>
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.CREATED' | translate | uppercase }}
                </th>
                <td mat-cell *matCellDef="let restrictions"
                    [attr.data-th]="'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.CREATED' | translate">
                    {{ restrictions?.created_at | date: 'dd/MM/yyyy' }}
                </td>
            </ng-container>

            <ng-container matColumnDef="range">
                <th mat-header-cell *matHeaderCellDef>
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.RANGE' | translate | uppercase }}
                </th>
                <td mat-cell *matCellDef="let restrictions"
                    [attr.data-th]="'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.RANGE' | translate">
                    {{ restrictions?.start_hour }} - {{ restrictions?.end_hour }}
                </td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef>
                    {{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.STATUS' | translate | uppercase }}
                </th>
                <td mat-cell *matCellDef="let restrictions"
                    [attr.data-th]="'STOREKEEPER-CRM.RESTRICTIONS_CENTER.TABLE.STATUS' | translate">
                    <span [ngClass]="cellStyleStatus(restrictions?.active)">
                        {{ restrictions?.active }}
                    </span>
                </td>
            </ng-container>

            <ng-container matColumnDef="detail">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let restrictions">
                    <div class="container-title" (click)="viewDetails(restrictions)">
                        {{ 'VIEW_DETAILS' | translate  }}
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="slider">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let restrictions">
                    <div class="container-icon">
                        <mat-slide-toggle (click)="statusRestriction(restrictions)" [ngModel]="restrictions?.active">
                        </mat-slide-toggle>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="edit">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let restrictions">
                    <div *ngIf="!restrictions?.active">
                        <mat-icon class="container-icon material-icons icon-button"
                            *hasPermission="['storekeeper', 'restrictions-center-create']"
                            (click)="addItem(restrictions)">
                            <img src="assets/images/storekeeper/icons-new-crud/editIcon.svg">
                        </mat-icon>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="delete">
                <th mat-header-cell *matHeaderCellDef>
                </th>
                <td mat-cell *matCellDef="let restrictions">
                    <div>
                        <mat-icon *hasPermission="['storekeeper', 'restrictions-center-delete']"
                            class="container-icon material-icons icon-button"
                            (click)="restrictionDelete(restrictions?.id)">
                            <img src="assets/images/storekeeper/icons-new-crud/deleteIcon.svg">
                        </mat-icon>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

        </table>

        <mat-paginator [length]="totalSize" [pageSize]="pageSize" showFirstLastButtons></mat-paginator>
    </div>

    <div class="container-not-found" *ngIf="(!restrictionsData)">
        <h1>{{ 'STOREKEEPER-CRM.RESTRICTIONS_CENTER.NOT_FOUND' | translate }}</h1>
    </div>
</div>